<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini Jeu - Voiture</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: #f4f4f4;
        }
        canvas {
            background-color: #333;
            display: block;
            margin: 0 auto;
        }
    </style>
</head>
<body>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<script>
    // Paramètres du jeu
    let canvas = document.getElementById('gameCanvas');
    let ctx = canvas.getContext('2d');

    let car = { x: canvas.width / 2 - 25, y: canvas.height - 60, width: 50, height: 60, speed: 5 };
    let obstacles = [];
    let gameSpeed = 2;
    let score = 0;

    // Fonction pour dessiner la voiture
    function drawCar() {
        ctx.fillStyle = 'blue';
        ctx.fillRect(car.x, car.y, car.width, car.height);
    }

    // Fonction pour dessiner un obstacle
    function drawObstacle(obstacle) {
        ctx.fillStyle = 'red';
        ctx.fillRect(obstacle.x, obstacle.y, obstacle.width, obstacle.height);
    }

    // Créer un nouvel obstacle
    function createObstacle() {
        let width = Math.random() * (canvas.width - 50) + 50;
        let height = 30;
        let x = Math.random() * (canvas.width - width);
        obstacles.push({ x: x, y: -height, width: width, height: height });
    }

    // Mettre à jour le jeu
    function updateGame() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        drawCar();

        // Mettre à jour les obstacles
        obstacles.forEach(function(obstacle, index) {
            obstacle.y += gameSpeed;
            drawObstacle(obstacle);
            if (obstacle.y > canvas.height) {
                obstacles.splice(index, 1); // Supprimer l'obstacle une fois qu'il sort de l'écran
                score++;
            }
        });

        // Créer de nouveaux obstacles
        if (Math.random() < 0.01) {
            createObstacle();
        }

        // Vérifier les collisions
        obstacles.forEach(function(obstacle) {
            if (car.x < obstacle.x + obstacle.width &&
                car.x + car.width > obstacle.x &&
                car.y < obstacle.y + obstacle.height &&
                car.y + car.height > obstacle.y) {
                    alert('Game Over! Your score is ' + score);
                    resetGame();
                }
        });

        requestAnimationFrame(updateGame);
    }

    // Réinitialiser le jeu
    function resetGame() {
        car.x = canvas.width / 2 - 25;
        car.y = canvas.height - 60;
        obstacles = [];
        score = 0;
        gameSpeed = 2;
    }

    // Mouvement de la voiture
    document.addEventListener('keydown', function(e) {
        if (e.key === 'ArrowLeft' && car.x > 0) {
            car.x -= car.speed;
        }
        if (e.key === 'ArrowRight' && car.x < canvas.width - car.width) {
            car.x += car.speed;
        }
    });

    // Démarrer le jeu
    updateGame();
</script>

</body>
</html>
